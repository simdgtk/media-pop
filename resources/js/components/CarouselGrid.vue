<template>
    <div class="embla carousel" ref="emblaRef">
        <div class="embla__container">
            <div class="embla__slide article">
                <a href="/search?cat=actualite" class="card actualites">
                    <svg class="icon actualites" viewBox="0 0 83 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M76.0833 6.91667H65.7083V3.45833C65.7083 2.54113 65.344 1.66149 64.6954 1.01292C64.0468 0.364359 63.1672 0 62.25 0C61.3328 0 60.4531 0.364359 59.8046 1.01292C59.156 1.66149 58.7917 2.54113 58.7917 3.45833V6.91667H24.2083V3.45833C24.2083 2.54113 23.844 1.66149 23.1954 1.01292C22.5468 0.364359 21.6672 0 20.75 0C19.8328 0 18.9532 0.364359 18.3046 1.01292C17.656 1.66149 17.2917 2.54113 17.2917 3.45833V6.91667H6.91667C5.08225 6.91667 3.32297 7.64538 2.02584 8.94251C0.728718 10.2396 0 11.9989 0 13.8333V83C0 84.8344 0.728718 86.5937 2.02584 87.8908C3.32297 89.1879 5.08225 89.9167 6.91667 89.9167H76.0833C77.9177 89.9167 79.677 89.1879 80.9742 87.8908C82.2713 86.5937 83 84.8344 83 83V13.8333C83 11.9989 82.2713 10.2396 80.9742 8.94251C79.677 7.64538 77.9177 6.91667 76.0833 6.91667ZM17.2917 13.8333V17.2917C17.2917 18.2089 17.656 19.0885 18.3046 19.7371C18.9532 20.3856 19.8328 20.75 20.75 20.75C21.6672 20.75 22.5468 20.3856 23.1954 19.7371C23.844 19.0885 24.2083 18.2089 24.2083 17.2917V13.8333H58.7917V17.2917C58.7917 18.2089 59.156 19.0885 59.8046 19.7371C60.4531 20.3856 61.3328 20.75 62.25 20.75C63.1672 20.75 64.0468 20.3856 64.6954 19.7371C65.344 19.0885 65.7083 18.2089 65.7083 17.2917V13.8333H76.0833V27.6667H6.91667V13.8333H17.2917ZM76.0833 83H6.91667V34.5833H76.0833V83ZM34.5833 44.9583V72.625C34.5833 73.5422 34.219 74.4218 33.5704 75.0704C32.9218 75.719 32.0422 76.0833 31.125 76.0833C30.2078 76.0833 29.3282 75.719 28.6796 75.0704C28.031 74.4218 27.6667 73.5422 27.6667 72.625V50.5522L25.7559 51.5119C24.935 51.9223 23.9847 51.9899 23.114 51.6996C22.2433 51.4094 21.5236 50.7852 21.1131 49.9643C20.7027 49.1434 20.6351 48.193 20.9254 47.3223C21.2156 46.4516 21.8398 45.7319 22.6607 45.3215L29.5774 41.8631C30.1048 41.5992 30.691 41.4745 31.2802 41.501C31.8694 41.5275 32.4421 41.7042 32.9437 42.0144C33.4454 42.3246 33.8594 42.7579 34.1464 43.2731C34.4333 43.7884 34.5838 44.3685 34.5833 44.9583ZM60.1577 58.1216L51.875 69.1667H58.7917C59.7089 69.1667 60.5885 69.531 61.2371 70.1796C61.8856 70.8281 62.25 71.7078 62.25 72.625C62.25 73.5422 61.8856 74.4218 61.2371 75.0704C60.5885 75.719 59.7089 76.0833 58.7917 76.0833H44.9583C44.3161 76.0833 43.6865 75.9045 43.1402 75.5668C42.5938 75.2292 42.1523 74.7461 41.8651 74.1716C41.5779 73.5972 41.4563 72.9541 41.514 72.3144C41.5716 71.6748 41.8063 71.0638 42.1917 70.55L54.633 53.963C54.916 53.5862 55.119 53.1556 55.2296 52.6976C55.3402 52.2396 55.356 51.7638 55.2761 51.2994C55.1962 50.8351 55.0223 50.392 54.765 49.9972C54.5076 49.6025 54.1724 49.2646 53.7797 49.0041C53.3871 48.7436 52.9454 48.5661 52.4817 48.4825C52.018 48.3989 51.5421 48.4109 51.0832 48.5178C50.6243 48.6247 50.1921 48.8243 49.8131 49.1042C49.4341 49.3842 49.1163 49.7386 48.8792 50.1458C48.6588 50.5517 48.3594 50.9093 47.9986 51.1975C47.6378 51.4858 47.2229 51.6988 46.7784 51.8241C46.3339 51.9494 45.8688 51.9844 45.4105 51.9271C44.9523 51.8697 44.5102 51.7212 44.1103 51.4902C43.7104 51.2592 43.3608 50.9504 43.0821 50.5822C42.8035 50.2139 42.6014 49.7935 42.4879 49.3459C42.3743 48.8982 42.3516 48.4324 42.421 47.9758C42.4904 47.5192 42.6505 47.0812 42.892 46.6875C44.0344 44.7106 45.797 43.1657 47.9066 42.2924C50.0163 41.4191 52.3551 41.266 54.5605 41.857C56.7659 42.448 58.7148 43.7501 60.1051 45.5613C61.4953 47.3725 62.2492 49.5917 62.25 51.875C62.2573 54.1304 61.5221 56.3256 60.1577 58.1216Z"
                            fill="currentColor" />
                    </svg>
                    <div class="icon-title">
                        <span class="title-text">actualités</span>
                        <div role="presentation" aria-hidden="true" class="highlight"></div>
                    </div>
                </a>
                <a href="/search?cat=internet" class="card internet">
                    <svg class="icon internet" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M48 0C38.5065 0 29.2262 2.81515 21.3326 8.08946C13.4391 13.3638 7.28681 20.8603 3.6538 29.6312C0.0207977 38.402 -0.929762 48.0532 0.922328 57.3643C2.77442 66.6754 7.34597 75.2282 14.0589 81.9411C20.7718 88.654 29.3246 93.2256 38.6357 95.0777C47.9468 96.9298 57.598 95.9792 66.3688 92.3462C75.1397 88.7132 82.6362 82.5609 87.9105 74.6674C93.1849 66.7738 96 57.4935 96 48C95.9853 35.2741 90.9235 23.0736 81.9249 14.0751C72.9264 5.07649 60.7259 0.0146584 48 0ZM88.6154 48C88.6186 51.7457 88.1013 55.4736 87.0785 59.0769H69.3046C70.4369 51.7357 70.4369 44.2643 69.3046 36.9231H87.0785C88.1013 40.5264 88.6186 44.2543 88.6154 48ZM36 66.4615H60C57.6356 74.2089 53.531 81.313 48 87.2308C42.4711 81.3114 38.3668 74.2078 36 66.4615ZM34.2 59.0769C32.9324 51.7467 32.9324 44.2533 34.2 36.9231H61.8369C63.1046 44.2533 63.1046 51.7467 61.8369 59.0769H34.2ZM7.38463 48C7.38142 44.2543 7.89868 40.5264 8.92156 36.9231H26.6954C25.5631 44.2643 25.5631 51.7357 26.6954 59.0769H8.92156C7.89868 55.4736 7.38142 51.7457 7.38463 48ZM60 29.5385H36C38.3644 21.7911 42.469 14.687 48 8.76923C53.5289 14.6886 57.6332 21.7922 60 29.5385ZM84.1523 29.5385H67.7123C65.6403 21.9365 62.148 14.7954 57.42 8.49231C63.1325 9.86459 68.4807 12.4559 73.0981 16.0886C77.7154 19.7212 81.4926 24.3094 84.1708 29.5385H84.1523ZM38.58 8.49231C33.852 14.7954 30.3598 21.9365 28.2877 29.5385H11.8293C14.5074 24.3094 18.2846 19.7212 22.902 16.0886C27.5193 12.4559 32.8675 9.86459 38.58 8.49231ZM11.8293 66.4615H28.2877C30.3598 74.0635 33.852 81.2046 38.58 87.5077C32.8675 86.1354 27.5193 83.5441 22.902 79.9114C18.2846 76.2787 14.5074 71.6906 11.8293 66.4615ZM57.42 87.5077C62.148 81.2046 65.6403 74.0635 67.7123 66.4615H84.1708C81.4926 71.6906 77.7154 76.2787 73.0981 79.9114C68.4807 83.5441 63.1325 86.1354 57.42 87.5077Z"
                            fill="currentColor" />
                    </svg>
                    <div class="icon-title">
                        <span class="title-text">internet</span>
                        <div role="presentation" aria-hidden="true" class="highlight"></div>
                    </div>
                </a>
            </div>
            <div class="embla__slide article">
                <a href="/search?cat=cinema" class="card cinema">
                    <svg class="icon cinema" viewBox="0 0 110 66" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M107.547 7.78484C106.967 7.4717 106.312 7.32294 105.653 7.35439C104.995 7.38584 104.356 7.59633 103.806 7.96343L87.5768 18.7981L87.6082 7.3269C87.6135 5.38369 86.8506 3.52006 85.4874 2.146C84.1242 0.771939 82.2724 0 80.3392 0H7.44916C5.516 0 3.6599 0.771939 2.28919 2.146C0.918484 3.52006 0.145446 5.38369 0.140136 7.3269L-6.15762e-06 58.6152C-0.00531587 60.5584 0.757538 62.4221 2.12074 63.7961C3.48394 65.1702 5.33581 65.9421 7.26898 65.9421H80.159C82.0922 65.9421 83.9483 65.1702 85.319 63.7961C86.6897 62.4221 87.4627 60.5584 87.468 58.6152L87.4993 47.1669L103.669 58.0245C104.27 58.4172 104.973 58.6227 105.691 58.6152C106.657 58.6152 107.585 58.2293 108.271 57.5422C108.956 56.8552 109.342 55.9234 109.345 54.9518L109.465 10.9904C109.462 10.3312 109.283 9.68551 108.945 9.12134C108.608 8.55718 108.124 8.09545 107.547 7.78484ZM80.179 58.6152H7.289L7.42914 7.3269H80.3192L80.179 58.6152ZM102.075 48.1057L87.5235 38.338L87.5528 27.6041L102.157 17.8593L102.075 48.1057Z"
                            fill="currentColor" />
                    </svg>

                    <div class="icon-title">
                        <span class="title-text">cinéma</span>
                        <div role="presentation" aria-hidden="true" class="highlight"></div>
                    </div>
                </a>
                <a href="/search?cat=musique" class="card musique">
                    <svg class="icon musique" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M1.24716 22.5586L22.5585 1.2472C23.3583 0.448133 24.4428 -0.000499183 25.5733 4.1682e-07C26.7039 0.000500016 27.7879 0.450091 28.587 1.24987C29.3861 2.04964 29.8347 3.13409 29.8342 4.26465C29.8337 5.39521 29.3841 6.47926 28.5843 7.27833L27.3376 8.52504L59.3953 40.5774C71.5375 34.2586 85.1341 34.786 93.371 43.0175C95.5447 45.2005 97.2474 47.8063 98.3738 50.6737C98.7198 51.451 99.2841 52.1111 99.9982 52.5736C100.712 53.0362 101.546 53.2812 102.396 53.279C110.17 53.54 116.92 56.3265 121.923 61.3294C128.359 67.7814 131.066 77.0412 129.606 87.4145C128.188 97.3403 123.036 107.17 115.082 115.082C107.127 122.994 97.3189 128.167 87.3772 129.584C85.5956 129.851 83.7973 129.99 81.996 130C73.8338 130 66.6358 127.214 61.3453 121.923C56.3424 116.92 53.556 110.17 53.2949 102.396C53.2958 101.544 53.0484 100.709 52.5829 99.9951C52.1174 99.2807 51.454 98.7174 50.6736 98.3739C47.8052 97.2495 45.1991 95.5465 43.0175 93.371C34.786 85.1342 34.2585 71.5269 40.5773 59.3953L8.525 27.3377L7.27828 28.5844C6.88262 28.9804 6.41283 29.2946 5.89574 29.5091C5.37866 29.7235 4.8244 29.834 4.2646 29.8343C3.70481 29.8345 3.15045 29.7245 2.63317 29.5105C2.11589 29.2965 1.64583 28.9827 1.24982 28.5871C0.853806 28.1914 0.539612 27.7216 0.32515 27.2045C0.110703 26.6874 0.000198364 26.1332 -4.57764e-05 25.5734C-0.000289917 25.0136 0.109726 24.4592 0.323715 23.9419C0.537704 23.4247 0.851501 22.9546 1.24716 22.5586ZM49.0166 87.3399C50.3752 88.6927 51.9986 89.7502 53.7851 90.446C56.1068 91.4026 58.0992 93.0153 59.5186 95.0867C60.938 97.158 61.7228 99.5983 61.7768 102.109C61.9687 107.682 63.908 112.45 67.3338 115.897C71.8305 120.389 78.5223 122.264 86.1731 121.166C94.3034 120.01 102.439 115.716 109.077 109.078C115.716 102.439 120.01 94.3034 121.166 86.2104C122.232 78.5543 120.389 71.8678 115.897 67.3711C112.45 63.9347 107.682 62.0007 102.109 61.8035C99.5979 61.7508 97.1571 60.9666 95.0854 59.547C93.0138 58.1274 91.4015 56.1342 90.446 53.8118C89.7534 52.0158 88.6957 50.383 87.3399 49.0167C84.4149 46.0917 80.4137 44.6852 75.9489 44.6852C72.4366 44.7414 68.971 45.5004 65.7568 46.9175L76.4551 57.6425C79.6487 57.9941 82.678 59.241 85.1937 61.2395C87.7095 63.2379 89.6094 65.9065 90.6744 68.9378C91.7394 71.9691 91.9262 75.2396 91.2132 78.3724C90.5002 81.5052 88.9166 84.3728 86.6447 86.6447C84.3728 88.9166 81.5052 90.5003 78.3724 91.2132C75.2396 91.9262 71.9691 91.7394 68.9378 90.6744C65.9065 89.6094 63.2379 87.7095 61.2394 85.1938C59.241 82.678 57.9941 79.6487 57.6424 76.4551L46.9441 65.7568C43.4704 73.9031 43.9712 82.2678 49.0166 87.3399ZM54.5576 54.5843C53.4315 55.717 52.3764 56.918 51.3982 58.1806L59.6137 66.3961C61.181 63.5503 63.5236 61.2077 66.3695 59.6404L58.1539 51.4196C56.9004 52.4004 55.7083 53.4573 54.5843 54.5843H54.5576ZM74.5903 66.0658C72.3295 66.0658 70.1612 66.9639 68.5626 68.5626C66.9639 70.1613 66.0658 72.3295 66.0658 74.5904C66.0658 76.2764 66.5657 77.9245 67.5024 79.3264C68.4391 80.7282 69.7705 81.8208 71.3281 82.466C72.8858 83.1112 74.5998 83.2801 76.2534 82.9511C77.907 82.6222 79.4259 81.8103 80.6181 80.6181C81.8103 79.426 82.6222 77.907 82.9511 76.2534C83.28 74.5998 83.1112 72.8858 82.466 71.3282C81.8208 69.7705 80.7282 68.4391 79.3263 67.5025C77.9245 66.5658 76.2763 66.0658 74.5903 66.0658ZM48.5638 48.5638C49.6943 47.4377 50.8822 46.3707 52.1228 45.3671L40.4921 33.7311L33.731 40.4921L45.3617 52.1175C46.3653 50.8769 47.4323 49.689 48.5585 48.5585L48.5638 48.5638ZM27.7053 34.461L34.461 27.7053L21.3118 14.5508L14.5508 21.3119L27.7053 34.461ZM84.3616 101.405C83.9656 101.801 83.6514 102.271 83.4369 102.788C83.2225 103.305 83.112 103.859 83.1117 104.419C83.1115 104.979 83.2215 105.533 83.4355 106.051C83.6495 106.568 83.9633 107.038 84.3589 107.434C84.7546 107.83 85.2244 108.144 85.7415 108.359C86.2586 108.573 86.8128 108.684 87.3726 108.684C87.9324 108.684 88.4868 108.574 89.004 108.36C89.5213 108.146 89.9914 107.832 90.3874 107.437L107.437 90.3874C108.236 89.5877 108.684 88.5032 108.684 87.3727C108.683 86.2421 108.234 85.1581 107.434 84.359C106.634 83.5599 105.55 83.1113 104.419 83.1118C103.289 83.1123 102.204 83.5619 101.405 84.3616L84.3616 101.405Z"
                            fill="currentColor" />
                    </svg>


                    <div class="icon-title">
                        <span class="title-text">musique</span>
                        <div role="presentation" aria-hidden="true" class="highlight"></div>
                    </div>
                </a>
            </div>
            <div class="embla__slide article">
                <a href="/search?cat=sport" class="card sport">
                    <svg class="icon sport" viewBox="0 0 75 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3.06947 52.2995L13.0104 47.3308C15.7851 45.9548 18.1188 43.829 19.747 41.1943C21.3751 38.5597 22.2326 35.5216 22.2222 32.4245V22.2197C22.2222 21.4829 22.5149 20.7764 23.0358 20.2555C23.5568 19.7345 24.2633 19.4419 25 19.4419C29.4189 19.4373 33.6554 17.6799 36.7801 14.5552C39.9047 11.4306 41.6621 7.19408 41.6667 2.77521C41.6672 2.25846 41.8118 1.75208 42.0843 1.31301C42.3568 0.873935 42.7463 0.519579 43.2092 0.289778C43.672 0.0599775 44.1898 -0.0361577 44.7043 0.0121812C45.2188 0.0605201 45.7096 0.251416 46.1215 0.563408L72.8715 20.8308L72.941 20.8863C73.546 21.3764 74.0413 21.9882 74.3947 22.682C74.7481 23.3758 74.9516 24.1362 74.9922 24.9137C75.0328 25.6913 74.9095 26.4687 74.6303 27.1955C74.3511 27.9224 73.9223 28.5824 73.3715 29.1328L33.8889 68.6294C33.6307 68.8872 33.3243 69.0917 32.9871 69.2311C32.6499 69.3705 32.2885 69.4421 31.9236 69.4419H5.55558C4.08215 69.4419 2.66908 68.8565 1.62721 67.8147C0.585342 66.7728 3.05176e-05 65.3597 3.05176e-05 63.8863V57.2682C-0.00327301 56.2361 0.282494 55.2236 0.824974 54.3454C1.36745 53.4673 2.14497 52.7585 3.06947 52.2995ZM5.55558 63.8863H30.7743L69.4444 25.2162L64.9757 21.8273L51.507 35.296C50.9857 35.8182 50.2784 36.1119 49.5407 36.1125C48.8029 36.1132 48.0951 35.8207 47.5729 35.2995C47.0508 34.7783 46.7571 34.071 46.7564 33.3332C46.7558 32.5954 47.0482 31.8876 47.5695 31.3655L60.507 18.4384L46.6181 7.9141C45.5654 12.3119 43.1991 16.2852 39.8338 19.3057C36.4684 22.3262 32.2634 24.2509 27.7778 24.8238V32.4245C27.7916 36.5543 26.648 40.6053 24.4766 44.1182C22.3053 47.631 19.1932 50.4653 15.4931 52.2995L5.55558 57.2682V63.8863ZM58.75 58.3307H72.2222C72.9589 58.3307 73.6655 58.0381 74.1864 57.5172C74.7073 56.9962 75 56.2897 75 55.553C75 54.8163 74.7073 54.1097 74.1864 53.5888C73.6655 53.0678 72.9589 52.7752 72.2222 52.7752H58.75C58.0133 52.7752 57.3068 53.0678 56.7858 53.5888C56.2649 54.1097 55.9722 54.8163 55.9722 55.553C55.9722 56.2897 56.2649 56.9962 56.7858 57.5172C57.3068 58.0381 58.0133 58.3307 58.75 58.3307ZM44.8611 66.6641C44.8611 67.4008 45.1538 68.1073 45.6747 68.6283C46.1956 69.1492 46.9022 69.4419 47.6389 69.4419H66.6667C67.4034 69.4419 68.1099 69.1492 68.6309 68.6283C69.1518 68.1073 69.4444 67.4008 69.4444 66.6641C69.4444 65.9274 69.1518 65.2208 68.6309 64.6999C68.1099 64.179 67.4034 63.8863 66.6667 63.8863H47.6389C46.9022 63.8863 46.1956 64.179 45.6747 64.6999C45.1538 65.2208 44.8611 65.9274 44.8611 66.6641Z"
                            fill="currentColor" />
                    </svg>
                    <div class="icon-title">
                        <span class="title-text">sport</span>
                        <div role="presentation" aria-hidden="true" class="highlight"></div>
                    </div>
                </a>
                <a href="/search?cat=culture" class="card culture">
                    <svg class="icon culture" viewBox="0 0 100 104" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M99.6622 88.6853L82.4027 6.62586C82.1795 5.55275 81.7464 4.53432 81.1284 3.62908C80.5104 2.72384 79.7196 1.94963 78.8015 1.35092C77.8834 0.752209 76.856 0.340806 75.7785 0.140341C74.7009 -0.0601244 73.5943 -0.0456997 72.5223 0.182786L48.18 5.41421C46.0269 5.88566 44.147 7.18818 42.9491 9.03847C41.7513 10.8888 41.3325 13.1372 41.7838 15.2946L59.0433 97.3541C59.4279 99.2263 60.4454 100.909 61.9247 102.119C63.4039 103.33 65.2548 103.994 67.1661 104C67.7569 103.999 68.346 103.936 68.9237 103.813L93.266 98.5814C95.4217 98.1088 97.3035 96.8037 98.5015 94.9502C99.6995 93.0967 100.117 90.845 99.6622 88.6853ZM49.9221 13.5942C49.9221 13.563 49.9221 13.5474 49.9221 13.5474L74.2592 8.34713L75.9908 16.5999L51.6538 21.8365L49.9221 13.5942ZM53.3647 29.9593L77.7121 24.733L79.449 33.0014L55.1223 38.2328L53.3647 29.9593ZM56.8176 46.3763L81.165 41.1449L88.0813 74.0311L63.7339 79.2625L56.8176 46.3763ZM91.5239 90.4482L67.1869 95.6484L65.4552 87.3957L89.7922 82.1591L91.5239 90.4014C91.5239 90.4326 91.5239 90.4482 91.5239 90.4482ZM33.2814 4.15575H8.32035C6.11366 4.15575 3.99734 5.03236 2.43697 6.59273C0.876606 8.1531 0 10.2694 0 12.4761V95.6796C0 97.8863 0.876606 100.003 2.43697 101.563C3.99734 103.123 6.11366 104 8.32035 104H33.2814C35.4881 104 37.6044 103.123 39.1648 101.563C40.7252 100.003 41.6018 97.8863 41.6018 95.6796V12.4761C41.6018 10.2694 40.7252 8.1531 39.1648 6.59273C37.6044 5.03236 35.4881 4.15575 33.2814 4.15575ZM8.32035 12.4761H33.2814V20.7965H8.32035V12.4761ZM8.32035 29.1168H33.2814V79.0389H8.32035V29.1168ZM33.2814 95.6796H8.32035V87.3593H33.2814V95.6796Z"
                            fill="currentColor" />
                    </svg>
                    <div class="icon-title">
                        <span class="title-text">culture</span>
                        <div role="presentation" aria-hidden="true" class="highlight"></div>
                    </div>
                </a>
            </div>
        </div>

        <Mo v-if="bgIcon" class="icon-background" />
    </div>
</template>

<script lang="ts" setup>
import emblaCarouselVue from 'embla-carousel-vue'
import { ref, onMounted, computed, defineProps } from 'vue'
import Mo from './icons/Mo.vue'

interface ArticleData {
    id: number
    title: string
    source_title?: string | null
    excerpt?: string
    image_url?: string | null
    source_url?: string | null
    category?: string[] | null
    created_at?: string | null
}

const props = defineProps<{
    category?: string | null
    bgIcon?: boolean
}>()

const bgIcon = props.bgIcon ?? false;

const [emblaRef] = emblaCarouselVue()
const articles = ref<ArticleData[]>([])

const fetchLatest = async () => {
    try {
        let url = '/articles/latest';
        if (props.category) {
            url += `?category=${encodeURIComponent(props.category)}`;
        }

        const res = await fetch(url);
        if (!res.ok) {
            console.error('articles latest returned', res.status);
            return;
        }

        const data = await res.json();
        articles.value = data;
    } catch (err) {
        console.error('Failed to fetch latest articles', err);
    }
}


onMounted(fetchLatest)

const filteredArticles = computed(() => articles.value);

</script>



<style lang="scss" scoped>
.embla {
    overflow: hidden;
}

.embla__container {
    display: flex;
    margin-left: 1.25rem;
        padding-right: 1.25rem;
}

.embla__slide {
    flex: 0 0 50%;
    min-width: 0;
    padding-right: toRem(8);

    &.article {
        display: flex;
        flex-direction: column;
        gap: toRem(8);
    }
}

.carousel {
    position: relative;
    padding-bottom: toRem(24);
}

.icon-background {
    position: absolute;
    bottom: -1%;
    left: toRem(20);
    width: calc(100vw - 20px);
    height: auto;
    max-width: toRem(500);
    color: #F34243;
    z-index: -1;
}


.article {
    aspect-ratio: 170 / 112;

    .card {
        background-color: $red;
        border-radius: toRem(8);
        overflow: hidden;
        position: relative;
        height: 100%;
        width: 100%;

        .icon {
            color: $red-light;
            position: absolute;
            z-index: 0;

            &.actualites {
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 50%;
            }

            &.internet {
                width: 55%;
                left: 5%;
                bottom: 5%;
            }

            &.cinema {
                transform: translate(-50%, -50%) rotate(-13.96deg);
                width: 60%;
                top: 50%;
                left: 50%;
            }

            &.musique {
                width: 65%;
                top: -3%;
                left: -5%;
            }

            &.sport {
                width: 55%;
                bottom: 5%;
                left: 5%;
            }

            &.culture {
                width: 60%;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
        }

        }

    }

    .icon-title {
        position: absolute;
        display: flex;
        z-index: 1;
        bottom: toRem(10);
        right: toRem(10);

        .title-text {
            font-size: toRem(12);
            font-weight: 700;
            color: $blue;
            text-transform: lowercase;
            line-height: 100%;
            font-weight: 700;
            font-size: toRem(28);
        }

        .highlight {
            display: block;
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: calc(100% + toRem(4));
            height: 100%;
            background-color: $lime;
            z-index: -1;
            transform: translate(toRem(-2), 0);
            transform-origin: left;
            transition: none;
        }
    }
}
</style>
